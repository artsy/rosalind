machine:
  ruby:
    version: 2.4.1
dependencies:
  pre:
    - gem install bundler
    - scripts/install_chrome
compile:
  pre:
    - bundle exec rake webpack:compile
test:
  pre:
    - bundle exec rubocop --rails
    - npm run lint
  override:
    - bundle exec rspec
    - npm run test -- --runInBand
  post:
    - bundle exec danger
deployment:
  staging:
    branch: master
    commands:
      - './scripts/heroku_deploy rosalind-staging'
  production:
    branch: release
    commands:
      - './scripts/heroku_deploy rosalind-production'
