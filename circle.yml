machine:
  ruby:
    version: 2.4.1
dependencies:
  pre:
    - gem install bundler --version 1.13.6
    - wget https://chromedriver.storage.googleapis.com/2.29/chromedriver_linux64.zip
    - unzip chromedriver_linux64.zip
    - sudo cp chromedriver /usr/local/bin/chromedriver
test:
  pre:
    - bundle exec rubocop --rails
    - npm run lint
  override:
    - bundle exec rspec
    - npm run test -- --runInBand
  post:
    - bundle exec danger
deployment:
  staging:
    branch: master
    commands:
      - './scripts/heroku_deploy rosalind-staging'
  production:
    branch: release
    commands:
      - './scripts/heroku_deploy rosalind-production'
